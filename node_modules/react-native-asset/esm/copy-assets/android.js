import * as dntShim from "../_dnt.shims.js";
import * as path from "../deps/jsr.io/@std/path/1.1.3/mod.js";
export default async function copyAssetsAndroid(assetPaths, platformConfig, options) {
    const destBase = options?.path ??
        (platformConfig?.path
            ? path.resolve(platformConfig.path, "assets")
            : undefined);
    if (!destBase) {
        console.info("No destination configured for android assets â€” skipping copy");
        return;
    }
    try {
        try {
            await dntShim.Deno.lstat(destBase);
        }
        catch (_e) {
            await dntShim.Deno.mkdir(destBase, { recursive: true });
        }
        Promise.all(assetPaths.map(async (asset) => {
            const dir = path.dirname(asset);
            await dntShim.Deno.mkdir(dir, { recursive: true });
            const base = path.basename(asset);
            const dest = path.resolve(destBase, base);
            await dntShim.Deno.copyFile(asset, dest);
        }));
    }
    catch (e) {
        console.error("Failed copying android assets:", e);
        throw e;
    }
}
